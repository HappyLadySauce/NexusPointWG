# WireGuard ç®¡ç†å¹³å° UI è®¾è®¡è§„èŒƒ

## 1. æ¦‚è¿° (Overview)
æœ¬è®¾è®¡è§„èŒƒæ—¨åœ¨ä¸º WireGuard ç®¡ç†å¹³å°æä¾›ä¸€å¥—æ¸…æ™°ã€ç»Ÿä¸€ä¸”ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢è®¾è®¡æŒ‡å—ã€‚å¹³å°é‡‡ç”¨ Golang åç«¯ä¸ React å‰ç«¯æŠ€æœ¯æ ˆï¼Œæ—¨åœ¨ä¸ºç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·æä¾›é«˜æ•ˆçš„ VPN ç®¡ç†ä½“éªŒã€‚

## 2. è§†è§‰è®¾è®¡ä½“ç³» (Visual Design System)

### 2.1 è‰²å½©æ–¹æ¡ˆ (Color Scheme)
åŸºäº Ant Design é»˜è®¤è‰²ç³»è¿›è¡Œå®šåˆ¶ï¼Œä½“ç°ç§‘æŠ€æ„Ÿä¸å®‰å…¨æ€§ã€‚

#### ä¸»è‰²è°ƒ (Primary)
- **Deep Blue**: `#1890ff` (ç”¨äºæŒ‰é’®ã€é“¾æ¥ã€é«˜äº®çŠ¶æ€)
- **Hover State**: `#40a9ff`
- **Active State**: `#096dd9`

#### è¾…åŠ©è‰² (Secondary)
- **Success (Green)**: `#52c41a` (ç”¨äºè¿è¡Œä¸­çŠ¶æ€ã€æˆåŠŸæç¤º)
- **Warning (Orange)**: `#faad14` (ç”¨äºæš‚åœã€æ³¨æ„æç¤º)
- **Error (Red)**: `#ff4d4f` (ç”¨äºåœæ­¢ã€åˆ é™¤ã€é”™è¯¯æç¤º)
- **Info (Blue)**: `#1890ff` (ç”¨äºä¸€èˆ¬ä¿¡æ¯)

#### ä¸­æ€§è‰² (Neutrals)
- **Text Primary**: `rgba(0, 0, 0, 0.85)` (ä¸»è¦æ–‡å­—)
- **Text Secondary**: `rgba(0, 0, 0, 0.65)` (æ¬¡è¦æ–‡å­—ã€æ ‡ç­¾)
- **Text Disabled**: `rgba(0, 0, 0, 0.25)` (ç¦ç”¨æ–‡å­—)
- **Border**: `#d9d9d9` (è¾¹æ¡†)
- **Background Base**: `#f0f2f5` (é¡µé¢èƒŒæ™¯)
- **Background Component**: `#ffffff` (å¡ç‰‡ã€å¼¹çª—èƒŒæ™¯)
- **Sidebar Background**: `#001529` (ä¾§è¾¹æ æ·±è‰²èƒŒæ™¯)

### 2.2 å­—ä½“ (Typography)
- **Font Family**: `-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif`
- **Base Size**: `14px`

### 2.3 å“åº”å¼æ–­ç‚¹ (Responsive Breakpoints)
- **Mobile (xs)**: `< 576px` (å•æ å¸ƒå±€ï¼Œéšè—ä¾§è¾¹æ ä¸ºæŠ½å±‰)
- **Tablet (md)**: `â‰¥ 768px` (åŒæ å¸ƒå±€ï¼Œä¾§è¾¹æ æŠ˜å )
- **Desktop (lg)**: `â‰¥ 992px` (å®Œæ•´å¸ƒå±€)
- **Wide (xl)**: `â‰¥ 1200px`

## 3. UI ç»„ä»¶åº“ (UI Components)
æ¨èä½¿ç”¨ **Ant Design (v5)** ä½œä¸ºåŸºç¡€ç»„ä»¶åº“ã€‚

### æ ¸å¿ƒç»„ä»¶ä½¿ç”¨è§„èŒƒ
1.  **Layout**: ä½¿ç”¨ `ProLayout` æˆ– Antd Grid ç³»ç»Ÿå®ç°å“åº”å¼æ¡†æ¶ã€‚
2.  **Table**: ç”¨äºå±•ç¤ºç”¨æˆ·åˆ—è¡¨å’Œ Peer åˆ—è¡¨ï¼Œéœ€æ”¯æŒåˆ†é¡µã€æ’åºã€ç­›é€‰ã€‚
    *   *Mobileé€‚é…*: å°å±å¹•ä¸‹è½¬åŒ–ä¸ºå¡ç‰‡åˆ—è¡¨ (`List` ç»„ä»¶) æˆ–æ¨ªå‘æ»šåŠ¨è¡¨æ ¼ã€‚
3.  **Form**: ä½¿ç”¨ `ProForm` æˆ– Antd Formï¼Œç»Ÿä¸€æ ¡éªŒåé¦ˆé£æ ¼ã€‚
4.  **Modal/Drawer**:
    *   ç®€å•è¡¨å•/ç¡®è®¤æ“ä½œä½¿ç”¨ `Modal`ã€‚
    *   å¤æ‚è¯¦æƒ…/é•¿è¡¨å•ä½¿ç”¨ `Drawer`ï¼ˆå³ä¾§æ»‘å‡ºï¼‰ã€‚
5.  **Feedback**: æ“ä½œåé¦ˆå¿…é¡»ä½¿ç”¨ `message.success/error` å…¨å±€æç¤ºã€‚
6.  **Icons**: ä½¿ç”¨ `@ant-design/icons`ã€‚

---

## 4. é¡µé¢çº¿æ¡†å›¾ (Wireframes)

### 4.1 ç™»å½•é¡µ (Login Page)
**è·¯ç”±**: `/login`
**é€‚ç”¨è§’è‰²**: æ‰€æœ‰ç”¨æˆ·

```
+-------------------------------------------------------+
|                                                       |
|   [ Logo ] NexusPoint WG                              |
|                                                       |
|   +-----------------------------------------------+   |
|   |  ç™»å½•                                         |   |
|   |                                               |   |
|   |  ç”¨æˆ·: [ è¯·è¾“å…¥ç”¨æˆ·å/é‚®ç®±                 ]  |   |
|   |                                               |   |
|   |  å¯†ç : [ è¯·è¾“å…¥å¯†ç                         ]  |   |
|   |                                               |   |
|   |  [ ] è®°ä½æˆ‘                    å¿˜è®°å¯†ç ?      |   |
|   |                                               |   |
|   |  [          ç™»    å½• (Primary)           ]   |   |
|   |                                               |   |
|   |  è¿˜æ²¡æœ‰è´¦å·? [ ç«‹å³æ³¨å†Œ ]                     |   |
|   +-----------------------------------------------+   |
|                                                       |
|   Copyright Â© 2024 NexusPoint WG                      |
+-------------------------------------------------------+
```

### 4.2 Admin æ§åˆ¶å° (Admin Dashboard)
**è·¯ç”±**: `/admin/dashboard`
**é€‚ç”¨è§’è‰²**: Admin

```
+----------------------+--------------------------------------------------+
| Logo   NexusPoint    |  [Menu Collapse]          [User Avatar v]        |
+----------------------+--------------------------------------------------+
| [ Dashboard      ]   |  Dashboard                                       |
| [ ç”¨æˆ·ç®¡ç†       ]   |                                                  |
| [ Peer ç®¡ç†      ]   |  +----------+  +----------+  +----------+        |
| [ ç³»ç»Ÿè®¾ç½®       ]   |  | ç”¨æˆ·æ€»æ•° |  | æ´»è·ƒPeer |  | æµé‡æ¶ˆè€— |        |
|                      |  |   128    |  |    42    |  |  1.2 TB  |        |
|                      |  +----------+  +----------+  +----------+        |
|                      |                                                  |
|                      |  +--------------------------------------------+  |
|                      |  |  ç³»ç»ŸçŠ¶æ€ (System Status)                  |  |
|                      |  |  CPU: [||||||....] 60%                     |  |
|                      |  |  RAM: [||||......] 40%                     |  |
|                      |  +--------------------------------------------+  |
|                      |                                                  |
|                      |  +--------------------------------------------+  |
|                      |  |  æœ€è¿‘æ´»åŠ¨                                  |  |
|                      |  |  - User A created peer (10 mins ago)       |  |
|                      |  |  - User B updated profile (1 hour ago)     |  |
|                      |  +--------------------------------------------+  |
+----------------------+--------------------------------------------------+
```

### 4.3 ç”¨æˆ·ç®¡ç† (User Management)
**è·¯ç”±**: `/admin/users`
**é€‚ç”¨è§’è‰²**: Admin

```
+-------------------------------------------------------------------------+
| ç”¨æˆ·ç®¡ç†                                                                |
+-------------------------------------------------------------------------+
| [ æœç´¢ç”¨æˆ·å/é‚®ç®±... ]   Filter: [ å…¨éƒ¨è§’è‰² v ]   [ + æ·»åŠ ç”¨æˆ·(Primary) ]|
+-------------------------------------------------------------------------+
|                                                                         |
|  ç”¨æˆ·åˆ—è¡¨                                                               |
|  +--------+----------+--------------------+-------+--------+---------+  |
|  | å¤´åƒ   | ç”¨æˆ·å   | é‚®ç®±               | è§’è‰²  | çŠ¶æ€   | æ“ä½œ    |  |
|  +--------+----------+--------------------+-------+--------+---------+  |
|  | (img)  | alice    | alice@example.com  | User  | Active | [Edit]  |  |
|  |        |          |                    |       |        | [Del ]  |  |
|  +--------+----------+--------------------+-------+--------+---------+  |
|  | (img)  | bob      | bob@example.com    | Admin | Active | [Edit]  |  |
|  +--------+----------+--------------------+-------+--------+---------+  |
|                                                                         |
|  < Prev  1  2  3  Next >                                                |
+-------------------------------------------------------------------------+
```
*æ³¨: "æ·»åŠ /ç¼–è¾‘ç”¨æˆ·" ä½¿ç”¨ Modal å¼¹çª—ï¼ŒåŒ…å«å­—æ®µ: ç”¨æˆ·åã€æ˜µç§°ã€é‚®ç®±ã€å¯†ç (ä»…åˆ›å»º/é‡ç½®)ã€è§’è‰²ã€çŠ¶æ€ã€‚*

### 4.4 Peer ç®¡ç† (Peer Management)
**è·¯ç”±**: `/admin/peers`
**é€‚ç”¨è§’è‰²**: Admin

```
+-------------------------------------------------------------------------+
| Peer é…ç½®ç®¡ç†                                                           |
+-------------------------------------------------------------------------+
| [ æœç´¢ Peer... ]     [ + åˆ›å»º Peer ]                                    |
+-------------------------------------------------------------------------+
|                                                                         |
|  +------------------+  +------------------+  +------------------+       |
|  | Peer: laptop-01  |  | Peer: phone-X    |  | Peer: server-1   |       |
|  | User: alice      |  | User: bob        |  | User: admin      |       |
|  | IP: 10.10.0.2/32 |  | IP: 10.10.0.3/32 |  | IP: 10.10.0.4/32 |       |
|  | Last: 2m ago     |  | Last: 2d ago     |  | Last: Online     |       |
|  | Status: [OK]     |  | Status: [Off]    |  | Status: [OK]     |       |
|  |                  |  |                  |  |                  |       |
|  | [View] [Revoke]  |  | [View] [Revoke]  |  | [View] [Revoke]  |       |
|  +------------------+  +------------------+  +------------------+       |
|                                                                         |
+-------------------------------------------------------------------------+
```

### 4.5 User æ§åˆ¶å° & é…ç½®ä¸‹è½½ (User Dashboard)
**è·¯ç”±**: `/user/dashboard`
**é€‚ç”¨è§’è‰²**: User

```
+----------------------+--------------------------------------------------+
| Logo                 |  [Menu]                   [User Avatar v]        |
+----------------------+--------------------------------------------------+
| [ æˆ‘çš„é…ç½®       ]   |  æˆ‘çš„é…ç½® (My Configurations)                    |
| [ ä¸ªäººä¸­å¿ƒ       ]   |                                                  |
|                      |  æ‚¨å½“å‰æœ‰ 2 ä¸ªå¯ç”¨çš„ WireGuard é…ç½®                |
|                      |                                                  |
|                      |  +--------------------------------------------+  |
|                      |  | ğŸ’»  Work Laptop                             |  |
|                      |  |     IP: 10.10.0.5/32                         |  |
|                      |  |     Endpoint: vpn.example.com:51820          |  |
|                      |  |     Public Key: xxxxxxxxx...                 |  |
|                      |  |                                              |  |
|                      |  |     [ ä¸‹è½½é…ç½® (.conf) ]  [ æ˜¾ç¤ºäºŒç»´ç  ]      |  |
|                      |  +--------------------------------------------+  |
|                      |                                                  |
|                      |  +--------------------------------------------+  |
|                      |  | ğŸ“±  iPhone 13                               |  |
|                      |  |     ...                                      |  |
|                      |  +--------------------------------------------+  |
|                      |                                                  |
+----------------------+--------------------------------------------------+
```

### 4.6 ä¸ªäººä¸­å¿ƒ (Profile & Password)
**è·¯ç”±**: `/user/profile`

```
+-------------------------------------------------------+
| ä¸ªäººä¿¡æ¯                                              |
|                                                       |
|  [ å¤´åƒ (Upload) ]                                    |
|                                                       |
|  ç”¨æˆ·å:    user1 (Read-only)                         |
|  æ˜µç§°:      [ Super User     ]                        |
|  é‚®ç®±:      [ user1@test.com ]                        |
|                                                       |
|  [ ä¿å­˜ä¿®æ”¹ ]                                         |
|                                                       |
+-------------------------------------------------------+
| ä¿®æ”¹å¯†ç                                               |
|                                                       |
|  å½“å‰å¯†ç :  [ ............ ]                          |
|  æ–°å¯†ç :    [ ............ ]                          |
|  ç¡®è®¤å¯†ç :  [ ............ ]                          |
|                                                       |
|  [ ä¿®æ”¹å¯†ç  ]                                         |
+-------------------------------------------------------+
```

---

## 5. äº¤äº’æµç¨‹ (Interaction Flows)

### 5.1 é…ç½®ä¸‹å‘ä¸ä¸‹è½½æµç¨‹
```mermaid
sequenceDiagram
    participant Admin
    participant Frontend
    participant Backend
    participant DB
    participant User

    %% åˆ›å»ºæµç¨‹
    Admin->>Frontend: ç‚¹å‡» "åˆ›å»º Peer"
    Frontend->>Frontend: æ‰“å¼€åˆ›å»ºè¡¨å• (é€‰æ‹©ç”¨æˆ·, å¡«å†™è®¾å¤‡å)
    Admin->>Frontend: æäº¤è¡¨å•
    Frontend->>Backend: POST /api/v1/wg/peers
    Backend->>Backend: ç”Ÿæˆç§é’¥/å…¬é’¥, åˆ†é…IP
    Backend->>DB: å­˜å‚¨ Peer ä¿¡æ¯
    Backend-->>Frontend: è¿”å›åˆ›å»ºæˆåŠŸ
    Frontend-->>Admin: æ˜¾ç¤ºæˆåŠŸæç¤º, åˆ·æ–°åˆ—è¡¨

    %% ä¸‹è½½æµç¨‹
    User->>Frontend: è®¿é—® "æˆ‘çš„é…ç½®"
    Frontend->>Backend: GET /api/v1/wg/configs
    Backend-->>Frontend: è¿”å›å½“å‰ç”¨æˆ·çš„é…ç½®åˆ—è¡¨
    Frontend->>Frontend: æ¸²æŸ“é…ç½®å¡ç‰‡
    User->>Frontend: ç‚¹å‡» "ä¸‹è½½é…ç½®"
    Frontend->>Backend: GET /api/v1/wg/configs/:id/download
    Backend-->>Frontend: è¿”å› .conf æ–‡ä»¶å†…å®¹
    Frontend->>User: è§¦å‘æµè§ˆå™¨æ–‡ä»¶ä¸‹è½½
```

### 5.2 ç”¨æˆ·æ³¨å†Œä¸å®¡æ ¸æµç¨‹
```mermaid
flowchart TD
    A[è®¿å®¢è®¿é—®æ³¨å†Œé¡µ] --> B(å¡«å†™æ³¨å†Œä¿¡æ¯);
    B --> C{æäº¤æ³¨å†Œ};
    C -->|æ ¡éªŒå¤±è´¥| B;
    C -->|æ ¡éªŒé€šè¿‡| D[åç«¯åˆ›å»ºç”¨æˆ· status=inactive];
    D --> E[æç¤ºç”¨æˆ·: ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸];
    
    F[Admin ç™»å½•] --> G[è¿›å…¥ç”¨æˆ·ç®¡ç†];
    G --> H[ç­›é€‰ inactive ç”¨æˆ·];
    H --> I[ç‚¹å‡» "ç¼–è¾‘"];
    I --> J[ä¿®æ”¹ status = active];
    J --> K[ä¿å­˜];
    K --> L[ç”¨æˆ·å¯ç™»å½•];
```

---

## 6. å‰ç«¯é¡¹ç›®ç»“æ„ (Project Structure)

å»ºè®®åœ¨ `ui/` ç›®å½•ä¸‹æ„å»º React é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ Viteã€‚

```
ui/
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ public/
â”‚   â””â”€â”€ logo.svg
â””â”€â”€ src/
    â”œâ”€â”€ App.tsx             # æ ¹ç»„ä»¶
    â”œâ”€â”€ main.tsx            # å…¥å£æ–‡ä»¶
    â”œâ”€â”€ api/                # API æ¥å£å®šä¹‰
    â”‚   â”œâ”€â”€ auth.ts
    â”‚   â”œâ”€â”€ user.ts
    â”‚   â””â”€â”€ peer.ts
    â”œâ”€â”€ assets/             # é™æ€èµ„æº
    â”œâ”€â”€ components/         # é€šç”¨ç»„ä»¶
    â”‚   â”œâ”€â”€ Layout/         # å¸ƒå±€ç»„ä»¶ (Header, Sidebar)
    â”‚   â”œâ”€â”€ Guard/          # è·¯ç”±å®ˆå«
    â”‚   â””â”€â”€ Common/         # åŸå­ç»„ä»¶
    â”œâ”€â”€ config/             # å…¨å±€é…ç½®
    â”œâ”€â”€ contexts/           # React Context (AuthContext)
    â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
    â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ Login/
    â”‚   â”œâ”€â”€ Admin/
    â”‚   â”‚   â”œâ”€â”€ Dashboard/
    â”‚   â”‚   â”œâ”€â”€ Users/
    â”‚   â”‚   â””â”€â”€ Peers/
    â”‚   â””â”€â”€ User/
    â”‚       â”œâ”€â”€ Dashboard/
    â”‚       â””â”€â”€ Profile/
    â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
    â”œâ”€â”€ styles/             # å…¨å±€æ ·å¼
    â”œâ”€â”€ types/              # TypeScript ç±»å‹å®šä¹‰
    â””â”€â”€ utils/              # å·¥å…·å‡½æ•° (request, validation)
```

## 7. æ¨èä¾èµ– (Dependencies)

-   **Core**: `react`, `react-dom`
-   **Build Tool**: `vite`
-   **Routing**: `react-router-dom`
-   **UI Library**: `antd`, `@ant-design/icons`
-   **HTTP Client**: `axios`
-   **State Management**: `zustand` (è½»é‡çº§) æˆ– `useContext`
-   **Data Fetching**: `swr` or `react-query` (æ¨è)
-   **Utilities**: `lodash`, `dayjs` (æ—¥æœŸå¤„ç†), `clsx` (ç±»åå¤„ç†)


